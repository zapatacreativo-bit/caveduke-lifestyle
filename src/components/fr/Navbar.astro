---
// src/components/fr/Navbar.astro
---
<header id="navbar" class="fixed top-0 w-full z-50 transition-all duration-500 py-6 px-6 md:px-12 flex items-center justify-between border-b border-transparent">
  
  <!-- Logo -->
  <a href="/fr" class="z-50 group">
    <div class="flex items-center gap-3">
      <img 
        src="/images/logo-caveduke.png" 
        alt="Caveduke Logo" 
        class="h-10 w-auto brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity duration-300"
      />
    </div>
  </a>

  <!-- Desktop Nav -->
  <nav class="hidden lg:flex items-center gap-10">
    {[
      { label: 'Patrimoine', href: '#heritage' },
      { label: 'Collections', href: '#collections' },
      { label: 'Contact', href: '#contact' }
    ].map((item) => (
      <a href={item.href} class="font-accent text-sm tracking-[0.15em] text-[var(--color-silver)] hover:text-[var(--color-ivory)] transition-colors uppercase relative after:content-[''] after:absolute after:-bottom-1 after:left-0 after:w-0 after:h-px after:bg-[var(--color-gold)] hover:after:w-full after:transition-all after:duration-300">
        {item.label}
      </a>
    ))}
    <a href="https://www.instagram.com/cavedukevinotecas" target="_blank" rel="noopener noreferrer" class="text-[var(--color-silver)] hover:text-[var(--color-gold)] transition-colors p-1" aria-label="Instagram">
      <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.04.148-3.58.07-4.9.148-3.204zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4.162 4.162 0 110-8.324A4.162 4.162 0 0112 16zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/>
      </svg>
    </a>
    
    <!-- Language Switcher -->
    <div class="flex items-center gap-4 ml-4 border-l border-[var(--color-graphite)] pl-6">
      <div class="flex items-center gap-2 group/lang">
        <svg class="w-4 h-4 rounded-full overflow-hidden shadow-sm" viewBox="0 0 512 512"><path fill="#ed2939" d="M341.3 0H512v512H341.3z"/><path fill="#fff" d="M170.7 0h170.6v512H170.7z"/><path fill="#002395" d="M0 0h170.7v512H0z"/></svg>
        <span class="font-accent text-sm text-[var(--color-ivory)] tracking-widest font-semibold cursor-default">FR</span>
      </div>
      <span class="text-[var(--color-graphite)] text-xs">/</span>
      <a href="/" class="flex items-center gap-2 font-accent text-sm text-[var(--color-silver)] hover:text-[var(--color-gold)] transition-all tracking-widest group/lang">
        <svg class="w-4 h-4 rounded-full overflow-hidden opacity-40 group-hover/lang:opacity-100 transition-opacity" viewBox="0 0 512 512"><path fill="#ffda44" d="M0 128h512v256H0z"/><path fill="#d80027" d="M0 0h512v128H0zm0 384h512v128H0z"/></svg>
        ES
      </a>
      <span class="text-[var(--color-graphite)] text-xs">/</span>
      <a href="/en" class="flex items-center gap-2 font-accent text-sm text-[var(--color-silver)] hover:text-[var(--color-gold)] transition-all tracking-widest group/lang">
        <svg class="w-4 h-4 rounded-full overflow-hidden opacity-40 group-hover/lang:opacity-100 transition-opacity" viewBox="0 0 512 512"><path fill="#00247d" d="M0 0h512v512H0z"/><path fill="#eee" d="M512 0v64L320 256l192 192v64h-64L256 320 64 512H0v-64l192-192L0 64V0h64l192 192L448 0z"/><path fill="#d80027" d="M512 0v16L336 192h-32v32L512 400v112h-16L320 336h-32v32L400 512H112l176-176h32v-32l192-192V0h-16L320 176h-32v-32L112 0H0v16l176 176h-32v32l-144 144V512h16l176-176h32v32L112 512h320L256 336h-32v-32L32 0zM0 208v96h512v-96zM208 0v512h96V0z"/></svg>
        EN
      </a>
    </div>
  </nav>

  <!-- CTA & Mobile Toggle -->
  <div class="flex items-center gap-6 z-50">
    <a href="#contact" class="hidden md:flex premium-button">
      <span class="w-1.5 h-1.5 rounded-full bg-current"></span>
      Demander un Devis
      <span class="w-1.5 h-1.5 rounded-full bg-current"></span>
    </a>
    
    <button id="menu-toggle" class="lg:hidden text-[var(--color-ivory)] flex flex-col gap-1.5 p-2" aria-label="Toggle menu">
      <span class="w-6 h-px bg-current transition-transform origin-center"></span>
      <span class="w-6 h-px bg-current transition-transform origin-center"></span>
    </button>
  </div>
</header>

<style>
  /* Scrolled state */
  #navbar.scrolled {
    background-color: rgba(10, 10, 10, 0.92);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    padding-top: 0.75rem;
    padding-bottom: 0.75rem;
    border-bottom-color: rgba(184, 184, 176, 0.12);
    box-shadow: 0 4px 32px rgba(0, 0, 0, 0.4);
  }
</style>

<script>
  const navbar = document.getElementById('navbar');

  function onScroll() {
    if (window.scrollY > 80) {
      navbar?.classList.add('scrolled');
    } else {
      navbar?.classList.remove('scrolled');
    }
  }

  window.addEventListener('scroll', onScroll, { passive: true });
  onScroll();
</script>
