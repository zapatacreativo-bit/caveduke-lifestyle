---
// src/components/Numbers.astro
// Inspired by Farm Minerals "Field-Tested / Numbers" section
---
<section id="numbers" class="bg-[var(--color-bordeaux)] text-[var(--color-ivory)] relative overflow-hidden py-32">
  <div class="max-w-7xl mx-auto px-6 md:px-12 flex flex-col md:flex-row gap-16 md:gap-24 relative z-10">
    
    <!-- Left: Sticky Heading -->
    <div class="w-full md:w-1/3 relative">
      <div class="sticky top-32">
        <div class="flex items-center gap-4 mb-6">
          <div class="w-8 h-px bg-[var(--color-gold)]"></div>
          <p class="font-accent text-[var(--color-gold)] tracking-widest uppercase text-sm">Royal Guarantee</p>
        </div>
        <h2 class="font-display text-4xl md:text-5xl lg:text-6xl leading-[1.1] mb-8">
          Approved by <br/><span class="italic text-[var(--color-gold)]">Time</span>
        </h2>
        <p class="font-body text-sm text-[var(--color-ivory)]/70 max-w-sm mb-8">
          The numbers speak to the rigor with which we craft every wine cabinet. Uncompromising quality and a track record that backs our global prestige.
        </p>
        <a href="https://caveduke.com/" target="_blank" rel="noopener noreferrer" class="premium-button !border-[var(--color-ivory)] !text-[var(--color-ivory)] hover:!bg-[var(--color-ivory)] hover:!text-[var(--color-bordeaux)]">
          Discover Why
        </a>
      </div>
    </div>

    <!-- Right: Stats List -->
    <div class="w-full md:w-2/3 flex flex-col gap-12 mt-12 md:mt-0">
      
      <!-- Item -->
      <div class="flex flex-col border-b border-[var(--color-ivory)]/20 pb-12 number-item">
        <div class="font-display text-7xl md:text-8xl lg:text-9xl mb-2 text-[var(--color-ivory)]">25<span class="text-4xl lg:text-5xl align-top ml-2">Years</span></div>
        <div class="font-accent tracking-[0.2em] text-[var(--color-gold)] uppercase text-sm mb-4">Compressor Warranty</div>
        <div class="h-0.5 bg-gradient-to-r from-[var(--color-gold)] to-transparent w-full origin-left scale-x-0 number-line"></div>
      </div>

      <!-- Item -->
      <div class="flex flex-col border-b border-[var(--color-ivory)]/20 pb-12 number-item">
        <div class="font-display text-7xl md:text-8xl lg:text-9xl mb-2 text-[var(--color-ivory)]">38<span class="text-4xl lg:text-5xl align-top ml-2">db</span></div>
        <div class="font-accent tracking-[0.2em] text-[var(--color-gold)] uppercase text-sm mb-4">Maximum Acoustic Emission</div>
        <div class="h-0.5 bg-gradient-to-r from-[var(--color-gold)] to-transparent w-full origin-left scale-x-0 number-line"></div>
      </div>

      <!-- Item -->
      <div class="flex flex-col border-b border-[var(--color-ivory)]/20 pb-12 number-item">
        <div class="font-display text-7xl md:text-8xl lg:text-9xl mb-2 text-[var(--color-ivory)]">0.1<span class="text-4xl lg:text-5xl align-top ml-2">Â°C</span></div>
        <div class="font-accent tracking-[0.2em] text-[var(--color-gold)] uppercase text-sm mb-4">Thermal Variation (Maximum)</div>
        <div class="h-0.5 bg-gradient-to-r from-[var(--color-gold)] to-transparent w-full origin-left scale-x-0 number-line"></div>
      </div>

      <!-- Item -->
      <div class="flex flex-col pb-12 number-item">
        <div class="font-display text-7xl md:text-8xl lg:text-9xl mb-2 text-[var(--color-ivory)]">10+</div>
        <div class="font-accent tracking-[0.2em] text-[var(--color-gold)] uppercase text-sm mb-4">Manual QA Checkpoints</div>
        <div class="h-0.5 bg-gradient-to-r from-[var(--color-gold)] to-transparent w-full origin-left scale-x-0 number-line"></div>
      </div>

    </div>

  </div>
</section>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  const numberItems = document.querySelectorAll('.number-item');

  numberItems.forEach((item) => {
    // Reveal line
    gsap.to(item.querySelector('.number-line'), {
      scaleX: 1,
      duration: 1.5,
      ease: 'power3.inOut',
      scrollTrigger: {
        trigger: item,
        start: 'top 95%',
      }
    });

    // Fade up text
    gsap.fromTo(item, 
      { y: 40, opacity: 0 },
      {
        y: 0,
        opacity: 1,
        duration: 1,
        ease: 'power2.out',
        scrollTrigger: {
          trigger: item,
          start: 'top 95%',
        }
      }
    );
  });
</script>
