---
// src/components/Navbar.astro
---
<header id="navbar" class="fixed top-0 w-full z-50 transition-all duration-500 py-6 px-6 md:px-12 flex items-center justify-between border-b border-transparent">
  
  <!-- Logo -->
  <a href="/en" class="z-50 text-[var(--color-ivory)] group">
    <div class="flex items-center gap-3">
      <svg viewBox="0 0 100 160" fill="none" class="w-5 h-8">
        <path d="M30 140 L30 40 L50 20 L70 40 L70 140 Z M20 140 L80 140" 
              stroke="currentColor" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
              class="group-hover:stroke-[var(--color-gold)] transition-colors duration-300" />
        <circle cx="50" cy="10" r="10" fill="currentColor" class="group-hover:fill-[var(--color-gold)] transition-colors duration-300" />
      </svg>
      <span class="font-display text-xl tracking-[0.15em] uppercase hidden sm:block">Caveduke</span>
    </div>
  </a>

  <!-- Desktop Nav -->
  <nav class="hidden lg:flex items-center gap-10">
    {[
      { label: 'Heritage', href: '#heritage' },
      { label: 'Collections', href: '#collections' },
      { label: 'Instagram', href: '#instagram' },
      { label: 'Contact', href: '#contact' }
    ].map((item) => (
      <a href={item.href} class="font-accent text-sm tracking-[0.15em] text-[var(--color-silver)] hover:text-[var(--color-ivory)] transition-colors uppercase relative after:content-[''] after:absolute after:-bottom-1 after:left-0 after:w-0 after:h-px after:bg-[var(--color-gold)] hover:after:w-full after:transition-all after:duration-300">
        {item.label}
      </a>
    ))}
    
    <!-- Language Switcher -->
    <div class="flex items-center gap-3 ml-4 border-l border-[var(--color-graphite)] pl-6">
      <span class="font-accent text-sm text-[var(--color-ivory)] tracking-widest font-semibold cursor-default">EN</span>
      <span class="text-[var(--color-graphite)] text-xs">/</span>
      <a href="/" class="font-accent text-sm text-[var(--color-silver)] hover:text-[var(--color-gold)] transition-colors tracking-widest">ES</a>
      <span class="text-[var(--color-graphite)] text-xs">/</span>
      <a href="/fr" class="font-accent text-sm text-[var(--color-silver)] hover:text-[var(--color-gold)] transition-colors tracking-widest">FR</a>
    </div>
  </nav>

  <!-- CTA & Mobile Toggle -->
  <div class="flex items-center gap-6 z-50">
    <a href="#contact" class="hidden md:flex premium-button">
      <span class="w-1.5 h-1.5 rounded-full bg-current"></span>
      Request Quote
      <span class="w-1.5 h-1.5 rounded-full bg-current"></span>
    </a>
    
    <button id="menu-toggle" class="lg:hidden text-[var(--color-ivory)] flex flex-col gap-1.5 p-2" aria-label="Toggle menu">
      <span class="w-6 h-px bg-current transition-transform origin-center"></span>
      <span class="w-6 h-px bg-current transition-transform origin-center"></span>
    </button>
  </div>
</header>

<style>
  /* Scrolled state â€” defined here so Tailwind purge doesn't remove it */
  #navbar.scrolled {
    background-color: rgba(10, 10, 10, 0.92);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    padding-top: 0.75rem;
    padding-bottom: 0.75rem;
    border-bottom-color: rgba(184, 184, 176, 0.12); /* silver/12 */
    box-shadow: 0 4px 32px rgba(0, 0, 0, 0.4);
  }
</style>

<script>
  const navbar = document.getElementById('navbar');

  function onScroll() {
    if (window.scrollY > 80) {
      navbar?.classList.add('scrolled');
    } else {
      navbar?.classList.remove('scrolled');
    }
  }

  window.addEventListener('scroll', onScroll, { passive: true });
  // Run once on load in case the page is already scrolled
  onScroll();
</script>
